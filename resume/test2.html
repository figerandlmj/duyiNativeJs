<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<script>
		// for(var i = 0; i < 5; i ++) {
		// 	setTimeout(function(){
		// 		console.log(new Date, i);
		// 	},1000);
		// }
		// console.log(new Date, i);

		// 结果是：5 -> 5,5,5,5,5

		// for(var i = 0; i < 5; i ++) {
		// 	(function(j){
		// 		setTimeout(function(){
		// 			console.log(new Date, j);
		// 		}, 1000)
		// 	})(i)
		// }
		// console.log(new Date, i);

		// var output = function(i){
		// 	setTimeout(function(){
		// 		console.log(new Date, i);
		// 	}, 1000);
		// }
		// for(var i = 0; i < 5; i ++) {
		// 	output(i);
		// }
		// console.log(new Date, i);
		// 结果是：5 -> 0,1,2,3,4

		// for(var i = 0; i < 5; i ++) {
		// 	(function(j){
		// 		setTimeout(function(){
		// 			console.log(new Date, j);
		// 		}, 1000 * j);
		// 	})(i)
		// }
		// setTimeout(function(){
		// 	console.log(new Date, i);
		// }, 1000 * i);

		// const tasks = [];
		// for(var i = 0; i < 5; i ++) {
		// 	((j) => {
		// 		tasks.push(new Promise((resolve) => {
		// 			setTimeout(() => {
		// 				console.log(new Date, j);
		// 				resolve();
		// 			}, 1000 *j);
		// 		}))
		// 	})(i);
		// }
		// Promise.all(tasks).then(() => {
		// 	setTimeout(() => {
		// 		console.log(new Date, i);
		// 	}, 1000);
		// })

		// const tasks = [];
		// const output = (i) => new Promise((resolve) => {
		// 	setTimeout(() => {
		// 		console.log(new Date, i);
		// 		resolve();
		// 	}, 1000 * i);
		// })
		// for(var i = 0; i < 5; i ++) {
		// 	tasks.push(output(i));
		// }
		// Promise.all(tasks).then(() => {
		// 	setTimeout(() => {
		// 		console.log(new Date, i);
		// 	}, 1000);
		// })

		const sleep = (timeoutMs) => new Promise((resolve) => {
			setTimeout(resolve, timeoutMs);
		});
		(async () => {
			for(var i = 0; i < 5; i ++) {
				await sleep(1000);
				console.log(new Date, i);
			}
			await sleep(1000);
			console.log(new Date, i);
		})();

		// 结果是：0 -> 1 -> 2 -> 3 -> 4 -> 5

	</script>
</body>
</html>